<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>黑马AI大模型开发 - 课程时间表</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <aside class="schedule-panel">
            <header class="schedule-header">
                <h2 id="scheduleTitle"><span class="emoji">📅</span> 加载中...</h2>
                <button class="switch-btn" id="switchScheduleBtn" disabled>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2v20M17 7l-5-5-5 5M17 17l-5 5-5-5"/>
                    </svg>
                    <span class="switch-btn-text">切换课表</span>
                </button>
            </header>
            <div class="timeline-wrapper" id="timelineWrapper">
                <div class="loading-state" id="timelineLoading">
                    <div class="spinner"></div>
                    <div class="loading-text">正在加载课表...</div>
                    <div class="skeleton-list">
                        <div class="skeleton-item"></div>
                        <div class="skeleton-item"></div>
                        <div class="skeleton-item"></div>
                        <div class="skeleton-item"></div>
                    </div>
                </div>
                <div class="empty-message hidden" id="emptyMessage">
                    <h3>今日无安排</h3>
                    <p>好好休息。</p>
                </div>
                <div class="timeline-container hidden" id="timelineContainer" aria-busy="false">
                    <div class="timeline-inner">
                        <div class="rail">
                            <div class="rail-track"></div>
                            <div class="rail-progress" id="railProgress"></div>
                            <div class="rail-current" id="railDot"></div>
                        </div>
                        <div class="timeline" id="timeline"></div>
                    </div>
                </div>
            </div>
        </aside>
        <main class="main-panel">
            <section class="status-section" id="statusSection">
                <div class="fab-group">
                    <button class="fab-button settings-fab" id="settingsButton" type="button" aria-label="打开设置">
                        <svg class="settings-fab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c0 .7.4 1.34 1.03 1.64.2.1.42.16.64.16H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1Z"/>
                        </svg>
                    </button>
                    <a class="fab-button github-fab" href="https://github.com/KARPED1EM/ITHM-Schedule" target="_blank" rel="noopener" aria-label="前往 GitHub 仓库">
                        <img src="images/github-mark.svg" alt="GitHub" class="github-fab-icon">
                    </a>
                </div>
                <div class="status-wrapper" id="statusWrapper">
                    <div class="current-card" id="currentCard">
                        <div class="card-header">
                            <span class="card-status">加载中</span>
                            <span class="card-type">课程</span>
                        </div>
                        <h3 class="card-title">请稍候...</h3>
                        <div class="card-time-range"></div>
                        <div class="card-countdown-wrapper">
                            <div class="countdown-label">预计开始于</div>
                            <div class="countdown-value">--:--:--</div>
                        </div>
                        <div class="card-progress">
                            <div class="card-progress-bar"></div>
                        </div>
                        <div class="card-skeleton">
                            <div class="skeleton-line"></div>
                            <div class="skeleton-line short"></div>
                        </div>
                    </div>
                    <div class="time-display" id="timeDisplay">
                        <div class="greeting" id="greeting"></div>
                        <div class="clock" id="clock">--:--:--</div>
                        <div class="time-notice hidden" id="timeNotice"></div>
                    </div>
                </div>
            </section>
            <section class="calendar-section">
                <h3 class="calendar-title">本月日程</h3>
                <div id="calendarGrid">
                    <div class="calendar-loading">
                        <div class="spinner"></div>
                        <div class="loading-text">正在加载日历...</div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <div class="modal-overlay" id="settingsModal" aria-hidden="true">
        <div class="modal settings-modal" role="dialog" aria-modal="true" aria-labelledby="settingsModalTitle">
            <h3 id="settingsModalTitle">时间设置</h3>
            <form class="settings-form" id="settingsForm" novalidate>
                <div class="settings-field">
                    <label for="timezoneInput" class="field-label">时区</label>
                    <input type="text" id="timezoneInput" name="timezone" class="settings-input" placeholder="UTC+8" autocomplete="off">
                    <p class="field-hint">示例：UTC+8、UTC-2、GMT+9</p>
                    <p class="field-error" id="timezoneError" role="alert"></p>
                </div>
                <div class="settings-field">
                    <span class="field-label" id="timeFormatLabel">时间制度</span>
                    <div class="format-options" role="radiogroup" aria-labelledby="timeFormatLabel">
                        <button type="button" class="format-option" data-format="12" aria-pressed="false">12 小时制</button>
                        <button type="button" class="format-option" data-format="24" aria-pressed="false">24 小时制</button>
                    </div>
                </div>
            </form>
            <div class="settings-actions">
                <button type="button" class="settings-save" id="settingsSaveBtn">保存</button>
                <button type="button" class="settings-cancel" id="settingsCancelBtn">取消</button>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="switchModal">
        <div class="modal">
            <h3>选择课表类型</h3>
            <div id="specialNotice" class="special-notice" style="display:none;"></div>
            <div class="schedule-options" id="scheduleOptions"></div>
            <div class="modal-actions">
                <button class="modal-default-btn" id="restoreDefaultBtn">恢复默认</button>
                <button class="modal-close" onclick="closeSwitchModal()">取消</button>
            </div>
        </div>
    </div>
    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
